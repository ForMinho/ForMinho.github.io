<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.5"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.5"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><title>当我们按下Command+B后，Xcode 做了什么？ | 琛酱的技术日志</title><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">当我们按下Command+B后，Xcode 做了什么？</h1><a id="logo" href="/.">琛酱的技术日志</a><p class="description">一点点在进步中的小琛酱</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">当我们按下Command+B后，Xcode 做了什么？</h1><div class="post-meta"><a href="/2020/05/28/%E5%BD%93%E6%88%91%E4%BB%AC%E6%8C%89%E4%B8%8BCommand+B%E5%90%8E%EF%BC%8CXcode%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F/#comments" class="comment-count"></a><p><span class="date">May 28, 2020</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>Hits</i></i></span></p></div><div class="post-content"><p>Command + B 是在使用Xcode的过程中，频繁使用的快捷键，当我们让xcode 执行这个命令的时候，Xcode究竟做了些什么？为什么可以检测出当前的程序有错误？为什么有些错误在这时检测不出，而到了运行时才会报错？</p>
<p>在这个过程中，又有哪些过程？ 本次就结合《程序员的自我修养》和LLVM来简单的剖析一下。</p>
<p>像是Xcode、visual studio这样的集成开发环境中，一般都会将编译和链接的一步到位，这个过程被称为构建（Build）</p>
<p>构建的过程，主要包括了预处理、编译、汇编、链接四个过程。</p>
<p>在本文中，会使用以下code作为例子：文件名为： main.m</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation&#x2F;Foundation.h&gt;</span><br><span class="line">#define DEFINEEight 8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        int eight &#x3D; DEFINEEight;</span><br><span class="line">        int six &#x3D; 6;</span><br><span class="line">        NSString *site &#x3D; [[NSString alloc] initWithUTF8String:&quot;starming&quot;];</span><br><span class="line">        int rank &#x3D; eight + six;</span><br><span class="line">        NSLog(@&quot;%@ rank %d&quot;, site, rank);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="1-预编译"><a href="#1-预编译" class="headerlink" title="1. 预编译"></a>1. 预编译</h1><p>预编译过程主要是处理源代码文件中以“#”开始的预编译命令，包括“#include”、“#define”等，其主要处理规则如下：</p>
<ul>
<li>将所有的“#define”删除，并展开所有的宏定义</li>
<li>处理所有条件编译指令，比如 “#if”、“#else”、“#endif”等</li>
<li>处理 “#include” 预编译指令，将被包含的文件插入到该预编译指令的位置，这个过程是递归的，也就是说被包含的文件还可能包含其他的文件。</li>
<li>删除所有的注释// 和 /* */</li>
<li>添加行号和文件名标识，以便以编译时编译器产生调试用的行号信息及用预编译时产生编译错误或者警告时显示行号</li>
<li>保留所有的“#pragma” 编译器指令</li>
</ul>
<p>可以用LLVM命令来查看预编译之后的文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -E main.m</span><br></pre></td></tr></table></figure>

<p>这个编译时间很长，而且会产生多行信息，在最后会包含一下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 1 &quot;&#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;MacOSX.platform&#x2F;Developer&#x2F;SDKs&#x2F;MacOSX.sdk&#x2F;System&#x2F;Library&#x2F;Frameworks&#x2F;Foundation.framework&#x2F;Headers&#x2F;FoundationLegacySwiftCompatibility.h&quot; 1 3</span><br><span class="line"># 193 &quot;&#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Platforms&#x2F;MacOSX.platform&#x2F;Developer&#x2F;SDKs&#x2F;MacOSX.sdk&#x2F;System&#x2F;Library&#x2F;Frameworks&#x2F;Foundation.framework&#x2F;Headers&#x2F;Foundation.h&quot; 2 3</span><br><span class="line"># 2 &quot;main.m&quot; 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        int eight &#x3D; 8;</span><br><span class="line">        int six &#x3D; 6;</span><br><span class="line">        NSString* site &#x3D; [[NSString alloc] initWithUTF8String:&quot;starming&quot;];</span><br><span class="line">        int rank &#x3D; eight + six;</span><br><span class="line">        NSLog(@&quot;%@ rank %d&quot;, site, rank);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="2-编译"><a href="#2-编译" class="headerlink" title="2. 编译"></a>2. 编译</h1><p>编译过程是把预处理的文件进行词法分析、语法分析、语义分析及优化后产生的汇编代码文件，这个过程是非常核心的，我们也可以通过LLVM来查看每一步都做了些什么。</p>
<h3 id="词法分析"><a href="#词法分析" class="headerlink" title="词法分析"></a>词法分析</h3><p>这个过程会将源代码分词成token，token分成以下几类：</p>
<ul>
<li>关键字： 语法中的关键字，if、else、while、for等</li>
<li>标识符：变量名</li>
<li>字面量：值、数字、字符串</li>
<li>特殊符号：加减乘除等符号</li>
</ul>
<p>通过命令行对文件进行词法分析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -fmodules -E -Xclang -dump-tokens main.m</span><br></pre></td></tr></table></figure>

<p>可以看到文件中所有的token都被划分，获得了相应的类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#&#39;        Loc&#x3D;&lt;main.m:1:1&gt;</span><br><span class="line">int &#39;int&#39;     [StartOfLine]    Loc&#x3D;&lt;main.m:4:1&gt;</span><br><span class="line">identifier &#39;main&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:4:5&gt;</span><br><span class="line">l_paren &#39;(&#39;        Loc&#x3D;&lt;main.m:4:9&gt;</span><br><span class="line">r_paren &#39;)&#39;        Loc&#x3D;&lt;main.m:4:10&gt;</span><br><span class="line">l_brace &#39;&#123;&#39;        Loc&#x3D;&lt;main.m:4:11&gt;</span><br><span class="line">at &#39;@&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:5:5&gt;</span><br><span class="line">identifier &#39;autoreleasepool&#39;        Loc&#x3D;&lt;main.m:5:6&gt;</span><br><span class="line">l_brace &#39;&#123;&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:5:22&gt;</span><br><span class="line">int &#39;int&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:6:9&gt;</span><br><span class="line">identifier &#39;eight&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:6:13&gt;</span><br><span class="line">equal &#39;&#x3D;&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:6:19&gt;</span><br><span class="line">numeric_constant &#39;8&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:6:21 &lt;Spelling&#x3D;main.m:2:21&gt;&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:6:32&gt;</span><br><span class="line">int &#39;int&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:7:9&gt;</span><br><span class="line">identifier &#39;six&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:7:13&gt;</span><br><span class="line">equal &#39;&#x3D;&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:7:17&gt;</span><br><span class="line">numeric_constant &#39;6&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:7:19&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:7:20&gt;</span><br><span class="line">identifier &#39;NSString&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:8:9&gt;</span><br><span class="line">star &#39;*&#39;        Loc&#x3D;&lt;main.m:8:17&gt;</span><br><span class="line">identifier &#39;site&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:8:19&gt;</span><br><span class="line">equal &#39;&#x3D;&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:8:24&gt;</span><br><span class="line">l_square &#39;[&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:8:26&gt;</span><br><span class="line">l_square &#39;[&#39;        Loc&#x3D;&lt;main.m:8:27&gt;</span><br><span class="line">identifier &#39;NSString&#39;        Loc&#x3D;&lt;main.m:8:28&gt;</span><br><span class="line">identifier &#39;alloc&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:8:37&gt;</span><br><span class="line">r_square &#39;]&#39;        Loc&#x3D;&lt;main.m:8:42&gt;</span><br><span class="line">identifier &#39;initWithUTF8String&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:8:44&gt;</span><br><span class="line">colon &#39;:&#39;        Loc&#x3D;&lt;main.m:8:62&gt;</span><br><span class="line">unknown &#39;”&#39;        Loc&#x3D;&lt;main.m:8:63&gt;</span><br><span class="line">identifier &#39;starming&#39;        Loc&#x3D;&lt;main.m:8:66&gt;</span><br><span class="line">unknown &#39;”&#39;        Loc&#x3D;&lt;main.m:8:74&gt;</span><br><span class="line">r_square &#39;]&#39;        Loc&#x3D;&lt;main.m:8:77&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:8:78&gt;</span><br><span class="line">int &#39;int&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:9:9&gt;</span><br><span class="line">identifier &#39;rank&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:9:13&gt;</span><br><span class="line">equal &#39;&#x3D;&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:9:18&gt;</span><br><span class="line">identifier &#39;eight&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:9:20&gt;</span><br><span class="line">plus &#39;+&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:9:26&gt;</span><br><span class="line">identifier &#39;six&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:9:28&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:9:31&gt;</span><br><span class="line">identifier &#39;NSLog&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:10:9&gt;</span><br><span class="line">l_paren &#39;(&#39;        Loc&#x3D;&lt;main.m:10:14&gt;</span><br><span class="line">at &#39;@&#39;        Loc&#x3D;&lt;main.m:10:15&gt;</span><br><span class="line">unknown &#39;“&#39;        Loc&#x3D;&lt;main.m:10:16&gt;</span><br><span class="line">percent &#39;%&#39;        Loc&#x3D;&lt;main.m:10:19&gt;</span><br><span class="line">at &#39;@&#39;        Loc&#x3D;&lt;main.m:10:20&gt;</span><br><span class="line">identifier &#39;rank&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:10:22&gt;</span><br><span class="line">percent &#39;%&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:10:27&gt;</span><br><span class="line">identifier &#39;d&#39;        Loc&#x3D;&lt;main.m:10:28&gt;</span><br><span class="line">unknown &#39;”&#39;        Loc&#x3D;&lt;main.m:10:29&gt;</span><br><span class="line">comma &#39;,&#39;        Loc&#x3D;&lt;main.m:10:32&gt;</span><br><span class="line">identifier &#39;site&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:10:34&gt;</span><br><span class="line">comma &#39;,&#39;        Loc&#x3D;&lt;main.m:10:38&gt;</span><br><span class="line">identifier &#39;rank&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:10:40&gt;</span><br><span class="line">r_paren &#39;)&#39;        Loc&#x3D;&lt;main.m:10:44&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:10:45&gt;</span><br><span class="line">r_brace &#39;&#125;&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:11:5&gt;</span><br><span class="line">return &#39;return&#39;     [StartOfLine] [LeadingSpace]    Loc&#x3D;&lt;main.m:12:5&gt;</span><br><span class="line">numeric_constant &#39;0&#39;     [LeadingSpace]    Loc&#x3D;&lt;main.m:12:12&gt;</span><br><span class="line">semi &#39;;&#39;        Loc&#x3D;&lt;main.m:12:13&gt;</span><br><span class="line">r_brace &#39;&#125;&#39;     [StartOfLine]    Loc&#x3D;&lt;main.m:13:1&gt;</span><br><span class="line">eof &#39;&#39;        Loc&#x3D;&lt;main.m:13:2&gt;</span><br></pre></td></tr></table></figure>



<h3 id="语法分析"><a href="#语法分析" class="headerlink" title="语法分析"></a>语法分析</h3><p>语法分析这一步将token按照语法组合成语义生成VarDecl 节点，这些节点按照层级关系构成抽象语法树。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -fmodules -fsyntax-only -Xclang -ast-dump main.m</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">TranslationUnitDecl 0x7f7f87036608 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; &lt;undeserialized declarations&gt;</span><br><span class="line">|-TypedefDecl 0x7f7f87036ea0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __int128_t &#39;__int128&#39;</span><br><span class="line">| &#96;-BuiltinType 0x7f7f87036ba0 &#39;__int128&#39;</span><br><span class="line">|-TypedefDecl 0x7f7f87036f10 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t &#39;unsigned __int128&#39;</span><br><span class="line">| &#96;-BuiltinType 0x7f7f87036bc0 &#39;unsigned __int128&#39;</span><br><span class="line">|-TypedefDecl 0x7f7f87036fb0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit SEL &#39;SEL *&#39;</span><br><span class="line">| &#96;-PointerType 0x7f7f87036f70 &#39;SEL *&#39; imported</span><br><span class="line">|   &#96;-BuiltinType 0x7f7f87036e00 &#39;SEL&#39;</span><br><span class="line">|-TypedefDecl 0x7f7f87037098 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit id &#39;id&#39;</span><br><span class="line">| &#96;-ObjCObjectPointerType 0x7f7f87037040 &#39;id&#39; imported</span><br><span class="line">|   &#96;-ObjCObjectType 0x7f7f87037010 &#39;id&#39; imported</span><br><span class="line">|-TypedefDecl 0x7f7f87037178 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit Class &#39;Class&#39;</span><br><span class="line">| &#96;-ObjCObjectPointerType 0x7f7f87037120 &#39;Class&#39; imported</span><br><span class="line">|   &#96;-ObjCObjectType 0x7f7f870370f0 &#39;Class&#39; imported</span><br><span class="line">|-ObjCInterfaceDecl 0x7f7f870371d0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit Protocol</span><br><span class="line">|-TypedefDecl 0x7f7f87037548 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __NSConstantString &#39;struct __NSConstantString_tag&#39;</span><br><span class="line">| &#96;-RecordType 0x7f7f87037340 &#39;struct __NSConstantString_tag&#39;</span><br><span class="line">|   &#96;-Record 0x7f7f870372a0 &#39;__NSConstantString_tag&#39;</span><br><span class="line">|-TypedefDecl 0x7f7f87073c00 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_ms_va_list &#39;char *&#39;</span><br><span class="line">| &#96;-PointerType 0x7f7f870375a0 &#39;char *&#39;</span><br><span class="line">|   &#96;-BuiltinType 0x7f7f870366a0 &#39;char&#39;</span><br><span class="line">|-TypedefDecl 0x7f7f87073ee8 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_va_list &#39;struct __va_list_tag [1]&#39;</span><br><span class="line">| &#96;-ConstantArrayType 0x7f7f87073e90 &#39;struct __va_list_tag [1]&#39; 1 </span><br><span class="line">|   &#96;-RecordType 0x7f7f87073cf0 &#39;struct __va_list_tag&#39;</span><br><span class="line">|     &#96;-Record 0x7f7f87073c58 &#39;__va_list_tag&#39;</span><br><span class="line">|-ImportDecl 0x7f7f87944d78 &lt;main.m:1:1&gt; col:1 implicit Foundation</span><br><span class="line">&#96;-FunctionDecl 0x7f7f87944e10 &lt;line:4:1, line:13:1&gt; line:4:5 main &#39;int ()&#39;</span><br><span class="line">  &#96;-CompoundStmt 0x7f7f8796f270 &lt;col:11, line:13:1&gt;</span><br><span class="line">    |-ObjCAutoreleasePoolStmt 0x7f7f8796f228 &lt;line:5:5, line:11:5&gt;</span><br><span class="line">    | &#96;-CompoundStmt 0x7f7f8796f1f0 &lt;line:5:22, line:11:5&gt;</span><br><span class="line">    |   |-DeclStmt 0x7f7f87944fb0 &lt;line:6:9, col:32&gt;</span><br><span class="line">    |   | &#96;-VarDecl 0x7f7f87944f28 &lt;col:9, line:2:21&gt; line:6:13 used eight &#39;int&#39; cinit</span><br><span class="line">    |   |   &#96;-IntegerLiteral 0x7f7f87944f90 &lt;line:2:21&gt; &#39;int&#39; 8</span><br><span class="line">    |   |-DeclStmt 0x7f7f87957170 &lt;line:7:9, col:20&gt;</span><br><span class="line">    |   | &#96;-VarDecl 0x7f7f87944fe0 &lt;col:9, col:19&gt; col:13 used six &#39;int&#39; cinit</span><br><span class="line">    |   |   &#96;-IntegerLiteral 0x7f7f87945048 &lt;col:19&gt; &#39;int&#39; 6</span><br><span class="line">    |   |-DeclStmt 0x7f7f8796e9f8 &lt;line:8:9, col:74&gt;</span><br><span class="line">    |   | &#96;-VarDecl 0x7f7f879571d0 &lt;col:9, col:73&gt; col:19 used site &#39;NSString *&#39; cinit</span><br><span class="line">    |   |   &#96;-ObjCMessageExpr 0x7f7f879579b0 &lt;col:26, col:73&gt; &#39;NSString * _Nullable&#39;:&#39;NSString *&#39; selector&#x3D;initWithUTF8String:</span><br><span class="line">    |   |     |-ObjCMessageExpr 0x7f7f879575b8 &lt;col:27, col:42&gt; &#39;NSString *&#39; selector&#x3D;alloc class&#x3D;&#39;NSString&#39;</span><br><span class="line">    |   |     &#96;-ImplicitCastExpr 0x7f7f87957998 &lt;col:63&gt; &#39;const char * _Nonnull&#39;:&#39;const char *&#39; &lt;NoOp&gt;</span><br><span class="line">    |   |       &#96;-ImplicitCastExpr 0x7f7f87957980 &lt;col:63&gt; &#39;char *&#39; &lt;ArrayToPointerDecay&gt;</span><br><span class="line">    |   |         &#96;-StringLiteral 0x7f7f87957628 &lt;col:63&gt; &#39;char [9]&#39; lvalue &quot;starming&quot;</span><br><span class="line">    |   |-DeclStmt 0x7f7f8796efd8 &lt;line:9:9, col:31&gt;</span><br><span class="line">    |   | &#96;-VarDecl 0x7f7f8796ea28 &lt;col:9, col:28&gt; col:13 used rank &#39;int&#39; cinit</span><br><span class="line">    |   |   &#96;-BinaryOperator 0x7f7f8796eb30 &lt;col:20, col:28&gt; &#39;int&#39; &#39;+&#39;</span><br><span class="line">    |   |     |-ImplicitCastExpr 0x7f7f8796eb00 &lt;col:20&gt; &#39;int&#39; &lt;LValueToRValue&gt;</span><br><span class="line">    |   |     | &#96;-DeclRefExpr 0x7f7f8796ea90 &lt;col:20&gt; &#39;int&#39; lvalue Var 0x7f7f87944f28 &#39;eight&#39; &#39;int&#39;</span><br><span class="line">    |   |     &#96;-ImplicitCastExpr 0x7f7f8796eb18 &lt;col:28&gt; &#39;int&#39; &lt;LValueToRValue&gt;</span><br><span class="line">    |   |       &#96;-DeclRefExpr 0x7f7f8796eac8 &lt;col:28&gt; &#39;int&#39; lvalue Var 0x7f7f87944fe0 &#39;six&#39; &#39;int&#39;</span><br><span class="line">    |   &#96;-CallExpr 0x7f7f8796f170 &lt;line:10:9, col:40&gt; &#39;void&#39;</span><br><span class="line">    |     |-ImplicitCastExpr 0x7f7f8796f158 &lt;col:9&gt; &#39;void (*)(id, ...)&#39; &lt;FunctionToPointerDecay&gt;</span><br><span class="line">    |     | &#96;-DeclRefExpr 0x7f7f8796eff0 &lt;col:9&gt; &#39;void (id, ...)&#39; Function 0x7f7f8796eb58 &#39;NSLog&#39; &#39;void (id, ...)&#39;</span><br><span class="line">    |     |-ImplicitCastExpr 0x7f7f8796f1a8 &lt;col:15, col:16&gt; &#39;id&#39;:&#39;id&#39; &lt;BitCast&gt;</span><br><span class="line">    |     | &#96;-ObjCStringLiteral 0x7f7f8796f070 &lt;col:15, col:16&gt; &#39;NSString *&#39;</span><br><span class="line">    |     |   &#96;-StringLiteral 0x7f7f8796f048 &lt;col:16&gt; &#39;char [11]&#39; lvalue &quot;%@ rank %d&quot;</span><br><span class="line">    |     |-ImplicitCastExpr 0x7f7f8796f1c0 &lt;col:30&gt; &#39;NSString *&#39; &lt;LValueToRValue&gt;</span><br><span class="line">    |     | &#96;-DeclRefExpr 0x7f7f8796f090 &lt;col:30&gt; &#39;NSString *&#39; lvalue Var 0x7f7f879571d0 &#39;site&#39; &#39;NSString *&#39;</span><br><span class="line">    |     &#96;-ImplicitCastExpr 0x7f7f8796f1d8 &lt;col:36&gt; &#39;int&#39; &lt;LValueToRValue&gt;</span><br><span class="line">    |       &#96;-DeclRefExpr 0x7f7f8796f0c8 &lt;col:36&gt; &#39;int&#39; lvalue Var 0x7f7f8796ea28 &#39;rank&#39; &#39;int&#39;</span><br><span class="line">    &#96;-ReturnStmt 0x7f7f8796f260 &lt;line:12:5, col:12&gt;</span><br><span class="line">      &#96;-IntegerLiteral 0x7f7f8796f240 &lt;col:12&gt; &#39;int&#39; 0</span><br></pre></td></tr></table></figure>



<h3 id="语义分析"><a href="#语义分析" class="headerlink" title="语义分析"></a>语义分析</h3><p>语法分析仅仅是完成了对表达式在语法层面的分析，但是并不会了解这个语句是否真正有意义。比如在C语言中，两个指针做乘法运算是没有意义的，但是在语法上是合理的。</p>
<p>编译期所能分析的语义是静态语义，所谓静态语义是指在编译期可以确定的语义，与之相对应的是动态语义，则是在运行期才能确定。</p>
<p>在经过语义分析阶段后，整个语法树的表达式都被表示了类型，如果有些类型需要做隐式转换，语义分析会在语法树中插入相应的转换节点。</p>
<h3 id="生成中间代码"><a href="#生成中间代码" class="headerlink" title="生成中间代码"></a>生成中间代码</h3><p>现代编译器在源代码级别往往会有优化过程，直接在语法树上优化会比较困难，所以源代码优化器往往将整个语法树转换成中间代码，它和语法树有一样的顺序表示，但是和目标机器及运行环境无关，比如它不包含数据的尺寸、变量地址和寄存器名称等等。</p>
<p>中间代码使编译器分为前端和后端。</p>
<p>编译器前端负责产生机器无关的中间代码，编译器后端则将中间代码转换成目标机器代码。这样对于一些可以跨平台的编译器来说，他们可以针对不同的平台使用同一个前端和针对不同机器平台的后端。</p>
<h1 id="3-生成汇编语言"><a href="#3-生成汇编语言" class="headerlink" title="3. 生成汇编语言"></a>3. 生成汇编语言</h1><p>汇编器将汇编代码生成机器可以执行的命令，每一条汇编语句几乎都会对应一条机器指令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clang -S -fobjc-arc main.m -o main.s</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">  .section    __TEXT,__text,regular,pure_instructions</span><br><span class="line">     .build_version macos, 10, 15    sdk_version 10, 15, 4</span><br><span class="line">     .globl    _main                   ## -- Begin function main</span><br><span class="line">     .p2align    4, 0x90</span><br><span class="line">_main:                                  ## @main</span><br><span class="line">     .cfi_startproc</span><br><span class="line">## %bb.0:</span><br><span class="line">     pushq    %rbp</span><br><span class="line">     .cfi_def_cfa_offset 16</span><br><span class="line">     .cfi_offset %rbp, -16</span><br><span class="line">     movq    %rsp, %rbp</span><br><span class="line">     .cfi_def_cfa_register %rbp</span><br><span class="line">     subq    $48, %rsp</span><br><span class="line">     movl    $0, -4(%rbp)</span><br><span class="line">     callq    _objc_autoreleasePoolPush</span><br><span class="line">     movl    $8, -8(%rbp)</span><br><span class="line">     movl    $6, -12(%rbp)</span><br><span class="line">     movq    _OBJC_CLASSLIST_REFERENCES_$_(%rip), %rcx</span><br><span class="line">     movq    %rcx, %rdi</span><br><span class="line">     movq    %rax, -40(%rbp)         ## 8-byte Spill</span><br><span class="line">     callq    _objc_alloc</span><br><span class="line">     movq    _OBJC_SELECTOR_REFERENCES_(%rip), %rsi</span><br><span class="line">     movq    %rax, %rdi</span><br><span class="line">     leaq    L_.str(%rip), %rdx</span><br><span class="line">     callq    *_objc_msgSend@GOTPCREL(%rip)</span><br><span class="line">     leaq    L__unnamed_cfstring_(%rip), %rcx</span><br><span class="line">     movq    %rax, -24(%rbp)</span><br><span class="line">     movl    -8(%rbp), %r8d</span><br><span class="line">     addl    -12(%rbp), %r8d</span><br><span class="line">     movl    %r8d, -28(%rbp)</span><br><span class="line">     movq    -24(%rbp), %rsi</span><br><span class="line">     movl    -28(%rbp), %edx</span><br><span class="line">     movq    %rcx, %rdi</span><br><span class="line">     movb    $0, %al</span><br><span class="line">     callq    _NSLog</span><br><span class="line">     xorl    %edx, %edx</span><br><span class="line">     movl    %edx, %esi</span><br><span class="line">     leaq    -24(%rbp), %rcx</span><br><span class="line">     movq    %rcx, %rdi</span><br><span class="line">     callq    _objc_storeStrong</span><br><span class="line">     movq    -40(%rbp), %rdi         ## 8-byte Reload</span><br><span class="line">     callq    _objc_autoreleasePoolPop</span><br><span class="line">     xorl    %eax, %eax</span><br><span class="line">     addq    $48, %rsp</span><br><span class="line">     popq    %rbp</span><br><span class="line">     retq</span><br><span class="line">     .cfi_endproc</span><br><span class="line">                                        ## -- End function</span><br><span class="line">     .section    __DATA,__objc_classrefs,regular,no_dead_strip</span><br><span class="line">     .p2align    3              ## @&quot;OBJC_CLASSLIST_REFERENCES_$_&quot;</span><br><span class="line">_OBJC_CLASSLIST_REFERENCES_$_:</span><br><span class="line">     .quad    _OBJC_CLASS_$_NSString</span><br><span class="line"></span><br><span class="line">     .section    __TEXT,__cstring,cstring_literals</span><br><span class="line">L_.str:                                 ## @.str</span><br><span class="line">     .asciz    &quot;starming&quot;</span><br><span class="line"></span><br><span class="line">     .section    __TEXT,__objc_methname,cstring_literals</span><br><span class="line">L_OBJC_METH_VAR_NAME_:                  ## @OBJC_METH_VAR_NAME_</span><br><span class="line">     .asciz    &quot;initWithUTF8String:&quot;</span><br><span class="line"></span><br><span class="line">     .section    __DATA,__objc_selrefs,literal_pointers,no_dead_strip</span><br><span class="line">     .p2align    3              ## @OBJC_SELECTOR_REFERENCES_</span><br><span class="line">_OBJC_SELECTOR_REFERENCES_:</span><br><span class="line">     .quad    L_OBJC_METH_VAR_NAME_</span><br><span class="line"></span><br><span class="line">     .section    __TEXT,__cstring,cstring_literals</span><br><span class="line">L_.str.1:                               ## @.str.1</span><br><span class="line">     .asciz    &quot;%@ rank %d&quot;</span><br><span class="line"></span><br><span class="line">     .section    __DATA,__cfstring</span><br><span class="line">     .p2align    3              ## @_unnamed_cfstring_</span><br><span class="line">L__unnamed_cfstring_:</span><br><span class="line">     .quad    ___CFConstantStringClassReference</span><br><span class="line">     .long    1992                    ## 0x7c8</span><br><span class="line">     .space    4</span><br><span class="line">     .quad    L_.str.1</span><br><span class="line">     .quad    10                      ## 0xa</span><br><span class="line"></span><br><span class="line">     .section    __DATA,__objc_imageinfo,regular,no_dead_strip</span><br><span class="line">L_OBJC_IMAGE_INFO:</span><br><span class="line">     .long    0</span><br><span class="line">     .long    64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.subsections_via_symbols</span><br></pre></td></tr></table></figure>





<h1 id="4-链接"><a href="#4-链接" class="headerlink" title="4. 链接"></a>4. 链接</h1><p>现在的程序越来越复杂，借助cocoaPods、git submodule 等方式，将项目拆分成独立的模块进行编译，再根据需求进行组装，这个过程就叫做链接（Linking），链接的主要内容是对各个模块之间互相引用的部分做处理，使各个模块之间能够正确的链接。</p>
<p>链接的过程主要包括了地址和空间分配、符号决议和重定位等步骤。</p>
<p>如图所示，源代码经过编译器编译之后生成目标文件，目标文件和库（Library）一起链接形成最终的可执行文件，在链接过程中，对定义在其他文件的函数调用指令和变量需要被重新调整。</p>
<p><img src="/images/buildProcess.jpg" alt=""></p>
<p>例如：在a文件中有个全局变量var， 在b文件中要访问这个全局变量，那么在目标文件b中就会有这么一条指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">movl  $0x2a, var</span><br></pre></td></tr></table></figure>

<p>在编译器编译目标文件b的时候，并不知道var的目标地址，因此编译过程中无法确定其地址，这条mov 指令的目标地址会置为0，等链接器将目标文件a 和 b链接起来的时候再将其修正。</p>
<p>假如a和b链接后，变量var的地址确定下来为0x1000， 那么链接器就会将这条指令的目标地址修正为0x1000，这个地址修正过程被称为重定位。</p>
<p>每个要被修正的地方叫做重定位入口，重定位所做的事情就是在程序中每个这样的绝对地址引用的位置“打补丁”，使其指向正确的地址。</p>
</div><div class="post-copyright"><blockquote><p>Original author: For_Minho</p><p>Original link: <a href="http://yoursite.com/2020/05/28/当我们按下Command+B后，Xcode做了什么？/">http://yoursite.com/2020/05/28/当我们按下Command+B后，Xcode做了什么？/</a></p><p>Copyright Notice: Please indicate the source of the reprint (must retain the author's signature and link)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>Share:</span></div></div><div class="post-nav"><a href="/2020/06/07/LLVM%20%E7%BC%96%E8%AF%91%E5%87%BA%E7%9A%84%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E7%A9%B6%E7%AB%9F%E9%9A%90%E8%97%8F%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88%EF%BC%9F/" class="pre">LLVM 编译出的目标文件里面究竟隐藏了些什么？</a><a href="/2020/05/25/%E3%80%8A%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E3%80%8B-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/" class="next">《程序员的自我修养》线程基础</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">Contents</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-预编译"><span class="toc-text">1. 预编译</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-编译"><span class="toc-text">2. 编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#词法分析"><span class="toc-text">词法分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#语法分析"><span class="toc-text">语法分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#语义分析"><span class="toc-text">语义分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成中间代码"><span class="toc-text">生成中间代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-生成汇编语言"><span class="toc-text">3. 生成汇编语言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-链接"><span class="toc-text">4. 链接</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/07/10/%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5/">动态链接</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/01/%E5%85%B3%E4%BA%8E%E9%9D%99%E6%80%81%E7%BC%96%E8%AF%91%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/">关于静态链接那些事儿</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/07/LLVM%20%E7%BC%96%E8%AF%91%E5%87%BA%E7%9A%84%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E7%A9%B6%E7%AB%9F%E9%9A%90%E8%97%8F%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88%EF%BC%9F/">LLVM 编译出的目标文件里面究竟隐藏了些什么？</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/28/%E5%BD%93%E6%88%91%E4%BB%AC%E6%8C%89%E4%B8%8BCommand+B%E5%90%8E%EF%BC%8CXcode%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F/">当我们按下Command+B后，Xcode 做了什么？</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/25/%E3%80%8A%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E3%80%8B-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/">《程序员的自我修养》线程基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/05/25/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">《程序员的自我修养》基础知识</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> Archive</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">6</span></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Site Map</a> |  <a href="/atom.xml">Subscribe to this site</a> |  <a href="/about/">Contact the blogger</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">For_Minho.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.5"></script><div id="fullscreen-img" class="hide"><span class="close"></span></div><script type="text/javascript" src="/js/imgview.js?v=2.0.5" async></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.5" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>